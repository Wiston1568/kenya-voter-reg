<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kenya Voter Registration</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="hero-full" style="background-image: url('./images/voting.jpg');">
    <div class="hero-overlay-full">
      <div class="hero-text">
        <h1>Kenya Voter Registration</h1>
        <p class="hero-subtitle">Your Voice, Your Vote, Your Future</p>
        <div class="hero-links">
          <a class="link" id="register-link" href="register.html">Register to vote ‚Üí</a>
          &nbsp;‚Ä¢&nbsp;
          <a class="link" href="recover.html">Recover your voter card</a>
        </div>
        <div id="registration-closed-banner" style="display:none;margin-top:20px;padding:12px;background:rgba(255,51,51,0.3);border:1px solid #ff3333;border-radius:6px;color:#ffcccc;font-weight:600;text-align:center;">
          Voter Registration is currently CLOSED
        </div>
      </div>
    </div>
  </div>

  <main class="main-content">
    <section class="about-section">
      <p class="about-desc">This portal helps citizens register for voting and download a voter card with QR for quick confirmation on election day. Registration windows are controlled by administrators.</p>
    </section>

    <section class="info-section">
      <h2>Why Vote Matters</h2>
      <p>Your vote is your voice! Voting is a fundamental right and responsibility that shapes the future of our nation. Every vote counts and contributes to building the Kenya we want.</p>
    </section>

    <section class="features-grid">
      <div class="feature-card">
        <div class="feature-icon">üìù</div>
        <h3>Easy Registration</h3>
        <p>Simple and quick registration process. Just fill in your details and get your voter card instantly.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">üÜî</div>
        <h3>Digital Voter Card</h3>
        <p>Receive a digital voter card with QR code for seamless verification on election day.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">üîí</div>
        <h3>Secure & Private</h3>
        <p>Your information is protected with the highest security standards. Your privacy matters to us.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">üì±</div>
        <h3>Mobile Friendly</h3>
        <p>Access voter registration anywhere, anytime. Works seamlessly on all devices.</p>
      </div>
    </section>

    <section class="info-section voting-tips">
      <h2>Voting Requirements</h2>
      <ul class="requirements-list">
        <li><strong>Age:</strong> Must be 18 years or older on election day</li>
        <li><strong>Citizenship:</strong> Must be a Kenyan citizen</li>
        <li><strong>Residency:</strong> Must have been resident for at least 3 months in the constituency</li>
        <li><strong>Registration:</strong> Must be registered as a voter</li>
      </ul>
    </section>

    <section class="cta-section">
      <h2>Ready to Make Your Voice Heard?</h2>
      <p>Join thousands of Kenyans who are taking an active role in shaping our democracy.</p>
      <a href="register.html" class="cta-button">Register Now</a>
    </section>
  </main>
  <script src="js/theme.js"></script>
  <script>
    // Check registration status on page load and periodically
    async function checkRegistrationStatus() {
      try {
        const API_BASE = window.location.hostname === 'localhost'
          ? 'http://localhost:4000'
          : `${window.location.protocol}//${window.location.host}`;
        const res = await fetch(`${API_BASE}/registration/status`);
        const data = await res.json();
        const banner = document.getElementById('registration-closed-banner');
        const link = document.getElementById('register-link');
        const ctaButton = document.querySelector('.cta-button');
        if (!data.open) {
          banner.style.display = 'block';
          link.style.display = 'none';
          if (ctaButton) ctaButton.style.display = 'none';
        } else {
          banner.style.display = 'none';
          link.style.display = 'inline-block';
          if (ctaButton) ctaButton.style.display = 'inline-block';
        }
      } catch (err) {
        console.error('Failed to check registration status:', err);
      }
    }
    checkRegistrationStatus();
    // Check every 5 seconds so toggle takes immediate effect
    setInterval(checkRegistrationStatus, 5000);
  </script>
</body>
</html>
